<html>
  <head> 
    <title>Zwappr</title>
  </head>

<body> 

  <h1> Create a new Post</h1>
  <form id="upload form"> 
    <label>Title:</label><br>
    <input type ="text" name="title" required><br><br>

    <label>Category:</label><br>
    <input type="text" name="category" required><br><br>

    <label>Description:</label><br>
    <textarea name="description" rows="5" cols="30" required></textarea><br><br>

    <label>Price Per Day:</label><br>
    <input type ="text" name="pricePerDay" required><br><br>

    <label>Upload Files (Images/Videos)</label><br>
    <input type ="file" name="files" multiple required><br><br>

    <button type = "submit"> Create Post</button>
  </form>

  <script> 
    const form = document.getElementID('uploadForm');
    form.addEventListener('submit', async (event) =>{
      event.preventDefault();

    const formData = new FormData(form);
    const files = form.querySelector('input[name="files"]').files;
    formData.append('files', files);

  try {
      const response = await fetch('/createPost', {
          method: 'POST',
          body: formData
      });
      const result = await response.json();
      alert('Post Created Successfully!');
  } catch (error) {
      alert('Error creating post: ' + error.message);
  }

  async function getCurrentUserId() {
    const response = await fetch('/api/getUserId');
    const data = await response.json();
    return data.userId;
}

  });

  </script>
</body>
</html>

